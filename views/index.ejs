<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
      integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="css/styles.css" />
    <title>Intro-Project</title>
  </head>
  <body>
    <br />
    <br />
    <h1 class="title ml-5"><%= title %></h1>
    <br />
    <br />
    <br />
    <div class="container">
      <div class="row">
        <div class="col-md-2 col-lg-2 col-xl-2"></div>
        <div class="col-8 col-sm-10 col-md-8 col-lg-7 col-xl-7">
          <form class="form-group d-flex" action="/" method="post">
            <div class="input-group">
              <input
                class="rounded form-control"
                name="searchbox"
                type="text"
                placeholder="Search"
                autocomplete="on"
                required
              />
            </div>
            <div class="input-group-append">
              <button class="btn btn-dark ml-3" name="searchbtn" type="submit">Search</button>
            </div>
          </form>
        </div>
        <div class="col-1 col-sm-1 col-md-1 col-lg-3 col-xl-3">
          <div class="dropdown d-lg-none">
            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Actions
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <form class="form-group" action="/" method="post">
                 <button class="dropdown-item" type="submit" name="new-btn">+ New</button>
                 <button class="dropdown-item" type="submit" name="show-btn">Show All</button>
              </form>
            </div>
          </div>
          <div class="d-none d-lg-block">
            <form action="/" method="post">
              <button class="btn btn-primary" type="submit" name="new-btn">+ New</button>
              <button class="btn btn-secondary ml-1" type="submit" name="show-btn">Show All</button>
            </form>
          </div>
      </div>
    </div>
    <br />
    <br />
    <br />
    <br />

    <% if (search !== "" && alertMessage === "") { %>
      <% for (let i = 0; i < items.length; i++) { %>
      <% if (search === items[i].name) { %>
      <% var itemSize = items[i].size; %>
      <% } %>

      <div class="container">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr class="table-heading bg_i">
                <td>Item name</td>
                <td>Size</td>
                <td class="header">Update</td>
              </tr>
            </thead>
            <tbody style="background-color: rgba(245, 245, 245, 0.744)">
              <tr>
                <td><%= search %></td>
                <td><%= itemSize %></td>
                <td class="header">
                  <div class="dropdown d-lg-none">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Update
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <form class="form-group" action="/" method="post">
                        <button class="dropdown-item" type="submit" name="add" value="<%= search %>">Add</button>
                        <button class="dropdown-item" type="submit" name="minus" value="<%= search %>">Remove</button>
                        <button class="dropdown-item" type="submit" name="rename" value="<%= search %>">Rename</button>
                        <button class="dropdown-item" type="submit" name="delete" value="<%= search %>">Delete</button>
                      </form>
                    </div>
                  </div>
                  <div class="d-none d-lg-block">
                      <form class="form-group" action="/" method="post">
                          <button class="btn btn-primary ml-5" type="submit" name="add" value="<%= search %>">
                            Add
                          </button>
                          <button class="btn btn-info ml-5" type="submit" name="minus" value="<%= search %>">
                            Remove
                          </button>
                          <button class="btn btn-secondary ml-5" type="submit" name="rename" value="<%= search %>">
                            Rename
                          </button>
                          <button class="btn btn-danger ml-5" type="submit" name="delete" value="<%= search %>">
                            Delete
                          </button>
                      </form>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <br />
          <br />
          <br />
          <form action="/" method="post">
            <button class="btn btn-warning clearbtn_i" name="clear-btn">Clear</button>
          </form>
        </div>
      </div>
      <% } %>
      <% } %>
    <% if (alertMessage !== "") { %>
    <script>
      alert("<%= alertMessage %>");
      window.location.href = "/";
    </script>
    <% } %>
    <script>
      $(document).ready(function() {
        // Show/hide the dropdown menu based on screen width
        function toggleDropdown() {
          if ($(window).width() < 992) {
            $('.dropdown').show();
            $('.d-none.d-lg-block').hide();
          } else {
            $('.dropdown').hide();
            $('.d-none.d-lg-block').show();
          }
        }
        // Toggle the dropdown initially
        toggleDropdown();
      
        // Toggle the dropdown when the window is resized
        $(window).resize(function() {
          toggleDropdown();
        });
      });
      </script>
  </body>
</html>
